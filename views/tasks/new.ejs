<%- include('../partials/header')  %>
<div class="formContainer">
    <h2> Create a new task</h2>

    <form action="/tasks" method="post">

    <% if(locals.errorMessage) { %>
        <div class="Error">
            <%= locals.errorMessage  %>
        </div>
    <% } %>

    <label for="Title"> Title:</label>
    <input type="text" id="titleInput" name="title" value="<%= locals.title  %>">


    <label for="Description"> Description:</label>
    <input type="text" id="DescriptionInput" name="description" value="<%= locals.description && locals.description[0].type %>">

    <label for="category" > Please select where you would like to store the task:</label>
    <select id="category" name="category" onchange="toggleCalendarForm()">
        <option value="2nd brain" <%= locals.category === '2nd brain' ? 'selected' : '' %>>2nd brain category </option>
        <option value="weekly tasks" <%= locals.category === 'weekly tasks' ? 'selected' : '' %>>Weekly task category </option>
        <% if (weeksAvailable.length > 0) {%>
        <option value="calendar tasks" <%= locals.category === 'calendar tasks' ? 'selected' : '' %> > Calendar task category </option>
        <% } %>
    </select>


    <div id="calendarOptions" style="display:none;">
        <label for="week">Select a week:</label>
        <select id="week" name="week" >
            <option value="" disabled selected>Please select an option </option>
            <% for(week of weeksAvailable) { %>
            <option value="<%= week.title %>"><%= week.title %> </option>
            <% } %>
        </select>
        
        <label for="day">Select a day</label>
        <select id="day" name="day">
            <option value="" disabled selected >Please select a day </option>
            <option value="Monday">Monday</option>
            <option value="Tuesday">Tuesday</option>
            <option value="Wednesday">Wednesday</option>
            <option value="Thursday">Thursday</option>
            <option value="Friday">Friday</option>
            <option value="Saturday">Saturday</option>
            <option value="Sunday">Sunday</option>
        </select>
    </div>

    <button class="createButton">Create your tasks!</button>

    </form>

</div>




<%- include ('../partials/footer')  %>

